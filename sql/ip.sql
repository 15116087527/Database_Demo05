CREATE DATABASE db_ip;

CREATE TABLE db_ip.ip (
  id     INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
  start  CHAR(15),
  end    CHAR(15),
  adress VARCHAR(255)
);

SELECT count(*)
FROM db_ip.ip;

-- IPV4 111.111.111.111

SELECT *
FROM scott.emp;

SELECT *
FROM scott.dept;

SELECT e.*
FROM emp e JOIN dept d
    ON e.DEPTNO = d.DEPTNO
WHERE d.DNAME = 'sales';


SELECT *
FROM emp
WHERE DEPTNO = (
  SELECT DEPTNO
  FROM dept
  WHERE DNAME = 'sales'
);

START TRANSACTION ;

DELETE FROM emp
WHERE ENAME = 'allen';

SELECT *
FROM emp;

ROLLBACK ;
COMMIT ;

CREATE TABLE temp( -- DDL
  id int
);

START TRANSACTION ;

SELECT *
FROM emp;

DELETE FROM emp WHERE ENAME = 'ward';

SAVEPOINT s1; -- delete ward

UPDATE emp SET DEPTNO = 10 WHERE ENAME='king';

SAVEPOINT s2; -- king > 10

DELETE FROM emp;

ROLLBACK TO s2;

ROLLBACK ;

START TRANSACTION ;
TRUNCATE TABLE emp;
DELETE FROM emp;
SELECT *
FROM emp;
ROLLBACK ;


SELECT count(*)
FROM db_ip.ip;

TRUNCATE db_ip.ip;